{"version":3,"sources":["../dist-esnext/Game.js"],"names":["Board","GameColor","Players","Position","create","args","boardConf","defaultBoardConf","getInitialBoard","board","blackPieces","whitePieces","game","ended","movements","players","white","black","getCleanGameToSaveOnServer","isMyTurn","from","isWhiteTurn","hasWhitePiece","hasBlackPiece","getGameWhereCanIGo","getCleanBoard","setWhereCanIGo","length","isBlackTurn","getColorTurn","getPlayerTurn","setPlayers","setMovements","needToValidateMovements"],"mappings":";;;;;;;AAAA;;AACA;;IAAYA,K;;AACZ;;IAAYC,S;;AACZ;;IAAYC,O;;AACZ;;IAAYC,Q;;;;AACZ,SAASC,MAAT,CAAgBC,IAAhB,EAAsB;AAClB,QAAMC,YAAYD,KAAKC,SAAL,IAAkBN,MAAMO,gBAA1C;;AADkB,gCAE0BP,MAAMQ,eAAN,CAAsBF,SAAtB,CAF1B;AAAA,QAEVG,KAFU,yBAEVA,KAFU;AAAA,QAEHC,WAFG,yBAEHA,WAFG;AAAA,QAEUC,WAFV,yBAEUA,WAFV;;AAGlB,QAAMC,OAAO;AACTC,eAAO,KADE;AAETC,mBAAWT,KAAKS,SAAL,IAAkB,EAFpB;AAGTC,iBAASb,QAAQE,MAAR,CAAeC,KAAKU,OAApB,CAHA;AAITT,4BAJS;AAKTU,eAAOf,UAAUG,MAAV,CAAiBE,SAAjB,EAA4B,KAA5B,EAAmCK,WAAnC,CALE;AAMTM,eAAOhB,UAAUG,MAAV,CAAiBE,SAAjB,EAA4B,IAA5B,EAAkCI,WAAlC,CANE;AAOTD;AAPS,KAAb;AASA,WAAOG,IAAP;AACH;AACD,SAASM,0BAAT,OAA0D;AAAA,QAApBL,KAAoB,QAApBA,KAAoB;AAAA,QAAbC,SAAa,QAAbA,SAAa;;AACtD,WAAO;AACHD,oBADG;AAEHC;AAFG,KAAP;AAIH;AACD,SAASK,QAAT,CAAkBP,IAAlB,EAAwBQ,IAAxB,EAA8B;AAC1B,QAAIR,KAAKC,KAAT,EACI,OAAO,KAAP;AACJ,WAAOQ,YAAYT,IAAZ,IAAoBT,SAASmB,aAAT,CAAuBF,IAAvB,CAApB,GAAmDjB,SAASoB,aAAT,CAAuBH,IAAvB,CAA1D;AACH;AACD,SAASI,kBAAT,CAA4BZ,IAA5B,EAAkCQ,IAAlC,EAAwC;AACpCR,SAAKH,KAAL,GAAaT,MAAMyB,aAAN,CAAoBb,KAAKH,KAAzB,CAAb;AACA,QAAI,CAACU,SAASP,IAAT,EAAeQ,IAAf,CAAL,EACI,OAAOR,IAAP;AACJA,SAAKH,KAAL,GAAaT,MAAM0B,cAAN,CAAqBd,KAAKH,KAA1B,EAAiCW,IAAjC,EAAuCjB,SAASoB,aAAT,CAAuBH,IAAvB,CAAvC,CAAb;AACH;AACD,SAASC,WAAT,CAAqBT,IAArB,EAA2B;AACvB,WAAOA,KAAKE,SAAL,CAAea,MAAf,GAAwB,CAAxB,KAA8B,CAArC;AACH;AACD,IAAMC,cAAc,gCAAaP,WAAb,CAApB;AACA,SAASQ,YAAT,CAAsBjB,IAAtB,EAA4B;AACxB,WAAOS,YAAYT,IAAZ,IAAoBA,KAAKI,KAAzB,GAAiCJ,KAAKK,KAA7C;AACH;AACD,SAASa,aAAT,CAAuBlB,IAAvB,EAA6B;AACzB,WAAOS,YAAYT,IAAZ,IAAoBA,KAAKG,OAAL,CAAaC,KAAjC,GAAyCJ,KAAKG,OAAL,CAAaE,KAA7D;AACH;AACD,SAASc,UAAT,CAAoBhB,OAApB,EAA6B;AACzB;AACA,SAAKA,OAAL,GAAeA,OAAf;AACH;AACD,SAASiB,YAAT,GAAsE;AAAA,QAAhDlB,SAAgD,uEAApC,EAAoC;AAAA,QAAhCmB,uBAAgC,uEAAN,IAAM;;AAClE;AACA;AACA,SAAKnB,SAAL,GAAiBA,SAAjB;AACA;AACA;AACH;QACQV,M,GAAAA,M;QAAQyB,Y,GAAAA,Y;QAAcC,a,GAAAA,a;QAAeN,kB,GAAAA,kB;QAAoBI,W,GAAAA,W;QAAaP,W,GAAAA,W;QAAaF,Q,GAAAA,Q;QAAUY,U,GAAAA,U;QAAYC,Y,GAAAA,Y;QAAcd,0B,GAAAA,0B;AAChI","file":"Game.js","sourcesContent":["import { compose, not } from 'ramda';\nimport * as Board from './Board';\nimport * as GameColor from './GameColor';\nimport * as Players from './Players';\nimport * as Position from './Position';\nfunction create(args) {\n    const boardConf = args.boardConf || Board.defaultBoardConf;\n    const { board, blackPieces, whitePieces } = Board.getInitialBoard(boardConf);\n    const game = {\n        ended: false,\n        movements: args.movements || [],\n        players: Players.create(args.players),\n        boardConf,\n        white: GameColor.create(boardConf, false, whitePieces),\n        black: GameColor.create(boardConf, true, blackPieces),\n        board\n    };\n    return game;\n}\nfunction getCleanGameToSaveOnServer({ ended, movements }) {\n    return {\n        ended,\n        movements\n    };\n}\nfunction isMyTurn(game, from) {\n    if (game.ended)\n        return false;\n    return isWhiteTurn(game) ? Position.hasWhitePiece(from) : Position.hasBlackPiece(from);\n}\nfunction getGameWhereCanIGo(game, from) {\n    game.board = Board.getCleanBoard(game.board);\n    if (!isMyTurn(game, from))\n        return game;\n    game.board = Board.setWhereCanIGo(game.board, from, Position.hasBlackPiece(from));\n}\nfunction isWhiteTurn(game) {\n    return game.movements.length % 2 === 0;\n}\nconst isBlackTurn = compose(not, isWhiteTurn);\nfunction getColorTurn(game) {\n    return isWhiteTurn(game) ? game.white : game.black;\n}\nfunction getPlayerTurn(game) {\n    return isWhiteTurn(game) ? game.players.white : game.players.black;\n}\nfunction setPlayers(players) {\n    // Validate Players\n    this.players = players;\n}\nfunction setMovements(movements = [], needToValidateMovements = true) {\n    // Validate Movements\n    // if(needToValidateMovements)\n    this.movements = movements;\n    // This must be called in another place\n    // this.board.fillAllPiecesOnBoard(this.white.pieces, this.black.pieces);\n}\nexport { create, getColorTurn, getPlayerTurn, getGameWhereCanIGo, isBlackTurn, isWhiteTurn, isMyTurn, setPlayers, setMovements, getCleanGameToSaveOnServer };\n//# sourceMappingURL=Game.js.map"]}