{"version":3,"sources":["../dist-esnext/Score.js"],"names":["Board","getInitialColorScore","won","winners","preWinnersPoints","getInitialScore","black","ended","white","getColorScore","positions","startRow","endRow","score","reduce","newScore","p","y","length","getScore","board","pieces","getPiecesFromBoard","startEndRows","getStartEndRows"],"mappings":";;;;;;;AAAA;;IAAYA,K;;;;AACZ,SAASC,oBAAT,GAAgC;AAC5B,WAAO;AACHC,aAAK,KADF;AAEHC,iBAAS,CAFN;AAGHC,0BAAkB;AAHf,KAAP;AAKH;AACD,SAASC,eAAT,GAA2B;AACvB,WAAO;AACHC,eAAOL,sBADJ;AAEHM,eAAO,KAFJ;AAGHC,eAAOP;AAHJ,KAAP;AAKH;AACD;;;;;AAKA,SAASQ,aAAT,OAA6CC,SAA7C,EAAwD;AAAA,QAA/BC,QAA+B,QAA/BA,QAA+B;AAAA,QAArBC,MAAqB,QAArBA,MAAqB;;AACpD,QAAMC,QAAQH,UAAUI,MAAV,CAAiB,UAACC,QAAD,EAAWC,CAAX,EAAiB;AAC5C,YAAIA,EAAEC,CAAF,KAAQL,MAAZ,EACIG,SAASZ,OAAT,IAAoB,CAApB,CADJ,KAGIY,SAASX,gBAAT,IAA6BQ,WAAW,CAAX,GACvBD,WAAWK,EAAEC,CADU,GAEvBD,EAAEC,CAFR;AAGJ,eAAOF,QAAP;AACH,KARa,EAQXd,sBARW,CAAd;AASAY,UAAMX,GAAN,GAAYW,MAAMV,OAAN,KAAkBO,UAAUQ,MAAxC;AACA,WAAOL,KAAP;AACH;AACD;;;AAGA,SAASM,QAAT,CAAkBC,KAAlB,EAAyB;AACrB,QAAMC,SAASrB,MAAMsB,kBAAN,CAAyBF,KAAzB,CAAf;AACA,QAAMG,eAAevB,MAAMwB,eAAN,CAAsBJ,KAAtB,CAArB;AACA,QAAMZ,QAAQC,cAAcc,aAAaf,KAA3B,EAAkCa,OAAOb,KAAzC,CAAd;AACA,QAAMF,QAAQG,cAAcc,aAAajB,KAA3B,EAAkCe,OAAOf,KAAzC,CAAd;AACA,WAAO;AACHC,eAAOC,MAAMN,GAAN,IAAaI,MAAMJ,GADvB;AAEHM,oBAFG;AAGHF;AAHG,KAAP;AAKH;QACQG,a,GAAAA,a;QAAeU,Q,GAAAA,Q;QAAUlB,oB,GAAAA,oB;QAAsBI,e,GAAAA,e;AACxD","file":"Score.js","sourcesContent":["import * as Board from './Board';\nfunction getInitialColorScore() {\n    return {\n        won: false,\n        winners: 0,\n        preWinnersPoints: 0\n    };\n}\nfunction getInitialScore() {\n    return {\n        black: getInitialColorScore(),\n        ended: false,\n        white: getInitialColorScore()\n    };\n}\n/**\n * Get color score\n *\n * returns { won, winners, preWinnersPoints }\n */\nfunction getColorScore({ startRow, endRow }, positions) {\n    const score = positions.reduce((newScore, p) => {\n        if (p.y === endRow)\n            newScore.winners += 1;\n        else\n            newScore.preWinnersPoints += endRow === 0\n                ? startRow - p.y\n                : p.y;\n        return newScore;\n    }, getInitialColorScore());\n    score.won = score.winners === positions.length;\n    return score;\n}\n/**\n * Takes a board and return Score\n */\nfunction getScore(board) {\n    const pieces = Board.getPiecesFromBoard(board);\n    const startEndRows = Board.getStartEndRows(board);\n    const white = getColorScore(startEndRows.white, pieces.white);\n    const black = getColorScore(startEndRows.black, pieces.black);\n    return {\n        ended: white.won || black.won,\n        white,\n        black\n    };\n}\nexport { getColorScore, getScore, getInitialColorScore, getInitialScore };\n//# sourceMappingURL=Score.js.map"]}